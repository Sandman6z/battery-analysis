# bBuild移除和代码优化总结

## 修改概述

根据您的要求，我已经从项目中完全移除了bBuild相关代码，并优化了代码逻辑，确保无论开发模式还是发布模式，代码都使用相同的发布模式功能。以下是详细的修改记录：

## 1. main_window.py 文件

### 1.1 Main类的__init__方法
- **修改前**：接收bBuild参数，根据参数值选择开发模式或发布模式路径
- **修改后**：统一使用发布模式逻辑，使用可执行文件目录中的setting.ini配置文件

### 1.2 Thread类的get_info方法
- **修改前**：接收bBuild参数并保存为实例变量
- **修改后**：移除了bBuild参数，不再需要该参数

### 1.3 Thread类的run方法
- **修改前**：包含bBuild条件判断，开发模式使用python -m命令，打包模式直接运行可执行文件
- **修改后**：移除了条件判断，统一使用发布模式逻辑（始终基于可执行文件目录查找visualizer可执行文件）

### 1.4 main函数
- **修改前**：检测是否为主窗口文件存在来决定bBuild值，再传递给Main类
- **修改后**：移除了bBuild检测逻辑，直接初始化Main类

### 1.5 Main.run方法中的Thread.get_info调用
- **修改前**：调用时传递self.bBuild参数
- **修改后**：移除bBuild参数，只传递必要的参数

## 2. image_show.py 文件

### 2.1 FIGURE类初始化
- **修改前**：包含基于sys.frozen的bBuild变量定义和文件存在性检查，使用条件判断选择不同路径
- **修改后**：移除了所有bBuild相关逻辑，统一使用发布模式逻辑（始终以os.path.dirname(sys.executable)作为路径）

### 2.2 main检查块
- **修改前**：包含bBuild变量定义和基于Main_ImageShow.py文件存在性的条件判断
- **修改后**：移除了bBuild相关代码，直接调用FIGURE类

## 3. file_writer.py 文件

### 3.1 __init__方法
- **修改前**：包含基于sys.frozen的bBuild变量定义和实例变量赋值
- **修改后**：移除了bBuild参数和相关逻辑，构造函数仅接收file_dir参数

### 3.2 get_config_path方法
- **修改前**：包含bBuild相关条件判断，根据开发/打包模式选择不同的配置文件路径
- **修改后**：移除了条件判断，统一返回可执行文件目录下的setting.ini路径

### 3.3 JsonWriter类的__init__方法
- **修改前**：包含基于sys.frozen的bBuild变量定义和开发/打包模式路径选择
- **修改后**：移除了bBuild相关逻辑，统一使用发布模式逻辑从可执行文件目录读取setting.ini

## 代码优化

### 1. 移除冗余代码
- 删除了所有与bBuild相关的变量定义、条件判断和路径选择逻辑
- 简化了方法参数，去除了不必要的bBuild参数

### 2. 统一运行模式
- 无论开发模式还是发布模式，都使用相同的发布模式逻辑
- 确保功能的一致性，消除由于模式不同可能导致的功能差异

### 3. 简化路径处理
- 统一使用可执行文件目录作为配置文件的查找路径
- 移除开发模式下的复杂路径计算逻辑

## 后续建议

1. **测试验证**：建议在开发和发布环境下进行全面测试，确保所有功能正常工作
2. **文档更新**：如果项目有文档说明，建议更新关于运行模式的部分
3. **依赖检查**：确保所有相关依赖文件（如setting.ini）在发布环境中正确部署

## 总结

通过移除bBuild相关代码，我们成功地简化了项目结构，统一了运行模式，确保了开发模式和发布模式的一致性。这些修改使代码更简洁、更易于维护，同时保持了所有功能的完整性。